---
#################
# Tasks to stage/update the site on the server
#################
  - name: create directory for virtualenv
    file:
      path={{ site_directory }}/{{ site_name }}/virtualenv
      state=directory
      owner={{ site_user }}
      group={{ site_group }}
      recurse=yes
      mode=0775
    sudo: true
  - name: create directory for the database files
    file:
      path={{ site_directory }}/{{ site_name }}/database
      state=directory
      owner={{ site_user }}
      group={{ site_group }}
      recurse=yes
      mode=0775
    sudo: true
  - name: create directory for static files
    file:
      path={{ site_directory }}/{{ site_name }}/static
      state=directory
      owner={{ site_user }}
      group={{ site_group }}
      recurse=yes
      mode=0775
    sudo: true
  - name: create directory for log files
    file:
      path={{ site_directory }}/{{ site_name }}/logs
      state=directory
      owner={{ site_user }}
      group={{ site_group }}
      recurse=yes
      mode=0775
    sudo: true
  - name: create python virtualenv for the site
    command:
      virtualenv {{ site_directory }}/{{ site_name }}/virtualenv -p python3.4
      creates={{ site_directory }}/{{ site_name }}/virtualenv/bin/python3